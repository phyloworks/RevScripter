<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv=“X-UA-Compatible” content=“IE=edge”>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>RevScripter</title>  

        <!--Revscripter style sheet-->
        <link rel="stylesheet" type="text/css" href="revscripter.css">

        <!--JQuery Library-->
        <script src="https://code.jquery.com/jquery-1.10.2.js"></script>

    </head>
    <body onload="init()">
        <input type="file" id="file" style="margin-top: 40px;"></input>
        <br/>
        <!-- <div style="height: 300px; width: 500px; border: .5px solid black; margin-left: 400px; margin-top: 40px;" id="data"></div> -->
        <textarea id="data" rows="30" cols="80" style="margin-top: 40px; " wrap="soft" readonly>Parsed data goes here</textarea>
        <br/>
        <button style="margin-left: 1%; margin-top: 40px; margin-bottom:40px;" onclick="myfunction()">Submit</button>
        <!-- <script>
            var filecontent = "Test1";
            var NTAX = "";
            var NCHAR = "";
            var TAXA = [];
            var dataType = "";

            function init(){
                document.getElementById('file').addEventListener('change', handleFileSelect, false);
            }

            function handleFileSelect(event){
                const reader = new FileReader()
                reader.onload = handleFileLoad;
                reader.readAsText(event.target.files[0])
            }

            function handleFileLoad(event){
                console.log(event);
                filecontent = event.target.result;
            }

            function myfunction(){
                var temparray = filecontent.split('\n');
                var nexusdata = getNexusData(temparray);
                document.getElementById('data').textContent = nexusdata;
            }

            function getNexusData(filecontent){//has file content as an array for each line
    
                var nexusdata = [];
                // Collects the taxa for the molecular.nex file only
                for(var i = 7; i < 30; i++){
                    var string = filecontent[i].split(' ');
                nexusdata.push(string[0]);
                }

                for(var i = 0; i < filecontent.length; i++){
                    if(filecontent[i].includes('DIMENSIONS')){
                        var n= filecontent[i].indexOf("NTAX");
                    console.log(filecontent[i].indexOf("NTAX="));
                    console.log(parseInt(filecontent[i].substring(n+5, n+8), 10));
                    }
                }

                return nexusdata.join('\n');
            }

        </script> -->
        <script src="./nexusparser.js"></script>
        <script src="./nexus.js"></script>
    </body>
</html>
